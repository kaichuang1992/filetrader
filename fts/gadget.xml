<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="FileTrader"
               author="FranÃ§ois Kooman"
               author_email="fkooman@tuxed.net">
    <Require feature="opensocial-0.9"/>
    <Require feature="osapi"/>
  </ModulePrefs>
  <Content type="html">
<![CDATA[
<script type="text/javascript">
    /* SURFconext */
    function getMyGroups() {
        osapi.groups.get({userId: '@owner'}).execute(function(response) {
            alert(response.list.length);
        });
    };

    /* iGoogle */
    function getMyFriends() {
        osapi.people.get({userId: '@owner', groupId: '@friends'}).execute(function(response) {
            alert(response.list.length);
        });
    };

    function makeSignedRequest() {
        var params = {};
        params[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.SIGNED;
        /* make this URL configurable */
        var url = "https://frkosp.wind.surfnet.nl/fts/index.php?action=serverInfo";
        gadgets.io.makeRequest(url, function(response) { 
            alert(response.text);
        }, params);
    };

    // getMyGroups();
    // getMyFriends();
    makeSignedRequest();
</script>
]]>
  </Content>
</Module>
